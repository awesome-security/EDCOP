#!/bin/bash
BUILDDIR=~/build
ISOLINUXDIR=$BUILDDIR/isolinux
mkdir -p $ISOLINUXDIR
cp /mnt/repodata/*comps.xml $BUILDDIR/comps.xml
mkdir -p $ISOLINUXDIR/{EXTRAS,images,isolinux,ks,LiveOS,Packages,repodata}
cp /mnt/TRANS.TBL $ISOLINUXDIR
cp /mnt/LiveOS/squashfs.img $ISOLINUXDIR/LiveOS
cp /mnt/isolinux/* $ISOLINUXDIR/isolinux
cp -r /mnt/images/* $ISOLINUXDIR/images
cp /mnt/.discinfo $ISOLINUXDIR/
cp ./ks.cfg $ISOLINUXDIR/ks
cp -f ./isolinux.cfg $ISOLINUXDIR/isolinux

yumdownloader --destdir=$ISOLINUXDIR/Packages --resolve iputils centos-release device-mapper-event-libs filesystem polkit-pkla-compat kbd-misc httpd linux-firmware cronie mailcap grub2-tools nss-softokn-freebl lvm2-libs glibc wpa_supplicant libstdc++ bash libpciaccess pcre plymouth-scripts zlib trousers audit-libs glib-networking sed fxload nspr alsa-tools-firmware libdb libpipeline chkconfig teamd grep libndp libxml2 virt-what libgcrypt bind-license readline dhclient elfutils-libelf dracut-network pkgconfig kbd shared-mime-info NetworkManager-tui libacl rsyslog lua man-db libnl3 elfutils-libs grub2 findutils mod_ssl gmp audit keyutils-libs microcode_ctl groff-base net-tools which rdma file-libs parted gdbm kernel-tools perl-HTTP-Tiny openssh-clients perl-podlators scap-security-guide perl-Encode sudo perl-Pod-Escapes e2fsprogs perl-Socket vim-enhanced perl-Storable libsysfs perl-Carp perl-Filter perl-macros perl-File-Temp perl-PathTools perl-Scalar-List-Utils perl-Pod-Simple file nss-softokn libcroco libassuan libunistring xz sysvinit-tools newt lzo hostname pciutils-libs libtasn1 libverto-devel libteam perl-Test-Harness keyutils-libs-devel nettle vim-minimal gsettings-desktop-schemas libcom_err-devel libsepol-devel xml-common pinentry libdb-utils libss kmod-libs vim-common libedit krb5-libs coreutils libblkid python cracklib dbus-python cracklib-dicts pam libgudev1 gettext libmount logrotate python-pyudev python-slip python-iniparse pyliblzma python-configobj pyxattr grubby binutils nss-sysinit nss-tools libcurl rpm-libs openldap dhcp-libs openscap python-pycurl httpd-tools fipscheck openssl-devel libproxy numactl-libs libsemanage libutempter policycoreutils selinux-policy kernel-tools-libs device-mapper-persistent-data hardlink gnupg2 rpm-python pygpgme yum libnetfilter_conntrack iproute kpartx device-mapper-libs dracut systemd systemd-sysv libgcc initscripts setup polkit basesystem os-prober ncurses-base cronie-anacron vim-filesystem crontabs tzdata device-mapper-event glibc-common dnsmasq xz-libs ppp ncurses-libs hwdata libsepol libdrm libselinux plymouth info gnutls libuuid libsoup libcom_err alsa-firmware popt ebtables bzip2-libs jansson nss-util json-c dbus-libs dmidecode libgpg-error libestr gawk bind-libs-lite expat NetworkManager libffi kbd-legacy glib2 kexec-tools libattr NetworkManager-team libcap tuned cpio firewalld p11-kit lvm2 sqlite mlocate diffutils kernel libcap-ng irqbalance dbus-glib biosdevname apr openssh-server libidn dracut-config-rescue libpcap iprutils perl-parent selinux-policy-targeted perl-Pod-Perldoc authconfig perl-Text-ParseWords passwd perl-Pod-Usage xfsprogs perl-libs btrfs-progs perl-threads tar perl-constant rootfiles perl-Time-HiRes perl-Exporter perl-Time-Local perl-File-Path perl-threads-shared perl-Getopt-Long perl apr-util libnl3-cli libxslt e2fsprogs-libs libgomp libnfnetlink slang libverto tcp_wrappers-libs libdaemon ethtool p11-kit-trust gettext-libs perl-Data-Dumper perl-Test-Simple less mpfr acl gobject-introspection pcre-devel zlib-devel libselinux-devel avahi-libs cyrus-sasl-lib mozjs17 make libselinux-utils freetype gpm-libs ncurses openssl-libs ca-certificates python-libs gzip python-decorator centos-logos libpwquality systemd-libs procps-ng pygobject3-base openssl plymouth-core-libs libselinux-python python-slip-dbus newt-python python-perf yum-metadata-parser alsa-lib nss NetworkManager-libnm libssh2 curl rpm libuser dhcp-common openscap-scanner python-urlgrabber fipscheck-lib krb5-devel libmodman snappy ustr shadow-utils util-linux openssh avahi-autoipd libaio lsscsi pth rpm-build-libs gpgme yum-plugin-fastestmirror libmnl iptables qrencode-libs device-mapper cryptsetup-libs kmod dbus open-vm-tools

